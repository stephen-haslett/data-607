---
title: "DATA 607 Project 4 - Document Classification"
author: "Stephen Haslett"
date: "10/28/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, eval=TRUE, message=FALSE, warning=FALSE}
library(caret)
library(kernlab)
library(doMC)
library(tibble)
library(tidyverse)
```
## Assignment Overview
It can be useful to be able to classify new "test" documents using already classified "training" documents.  A common example is using a corpus of labeled spam and ham (non-spam) e-mails to predict whether or not a new document is spam.  

For this project, you can start with a spam/ham dataset, then predict the class of new documents (either withheld from the training dataset or from another source such as your own spam folder).   One example corpus:   https://spamassassin.apache.org/old/publiccorpus/

### List the first 6 Ham training files contained within the "spam_ham_training/easy_ham" directory.
```{r, eval=TRUE, message=FALSE, warning=FALSE}
ham_training_files <- list.files(path="/Users/stephenhaslett/Data607/data_607_project_4/spam_ham_training/easy_ham")
head(ham_training_files)
```


### List the first 6 Spam training files contained within the "spam_ham_training/spam_2" directory.
```{r, eval=TRUE, message=FALSE, warning=FALSE}
spam_training_files <- list.files(path="/Users/stephenhaslett/Data607/data_607_project_4/spam_ham_training/spam_2")
head(spam_training_files)
```

### Load the files in a dataframe for analysis within R.
```{r, eval=TRUE, message=FALSE, warning=FALSE}
training_files <- tibble()
file_directories <- c("./spam_2", "./easy_ham_2")
email_categories <-c("spam", "ham")
combined_files <- c(spam_training_files, ham_training_files)

for (count in 1: length(file_directories)) {
  email_category <- email_categories[count]
  ff <- tibble(file = dir(file_directories[count],  full.names = TRUE)) %>% mutate(text = map(file, read_lines)) %>%
                transmute(id = basename(file), type = type, text) %>%
                unnest(text)
                training_files <- bind_rows(training_files, ff)
}
head(training_files)
```
